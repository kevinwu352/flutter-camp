
æ—  public / privateï¼Œä¸‹åˆ’çº¿å¼€å¤´çš„ä¸º library ç§æœ‰ï¼Œå¥½åƒå¹¶éé ç¨‹åºå‘˜è‡ªè§‰ï¼Œè€Œæ˜¯ç¼–è¯‘å™¨ä¿è¯å®ƒä¸å¯è¢«å¤–éƒ¨è®¿é—®

final val = a ? 1 :
            b ? 2 : 3;

list
  .where((c) => c >= 3)
  .map((c) => c + 10)
  .forEach((c) => print(c));
map((item) { return item.toUpperCase(); })

!> obj.runtimeType ç±»å‹æ˜¯ Typeã€‚ç”¨ obj is Typeï¼Œå°½é‡ä¸è¦ç”¨ obj.runtimeType == Type

class WannabeFunction {
  String call(String a, String b, String c) => '$a $b $c!'; // swift çš„ callAsFunction
}

!> ç©ºé›†åˆä¸Šé¢è°ƒç”¨ first/last ä¼šå´©

switch ç©ºå†…å®¹ä¼šæ¼ä¸‹å»ï¼Œå…¶å®ƒä¸ä¼š

é€šè¿‡ getter è·å–æŸä¸ªå®ä¾‹åï¼Œå¦‚æœä¿®æ”¹æ­¤å®ä¾‹çš„å±æ€§ï¼ŒåŸæ¥çš„å®ä¾‹çš„å±æ€§ä¹Ÿä¼šå˜ã€‚è¿™å’Œ swift çš„å€¼ç±»å‹ä¸ä¸€æ ·

æ— åˆå§‹å€¼çš„ late final éƒ½æœ‰ setterï¼Œæ³¨æ„ï¼šæœ‰åˆå€¼çš„ late final æ²¡ setter

å­ç±»ä¸ç»§æ‰¿å‘½åæ„é€ å™¨ï¼Œè¦ç”¨å°±è‡ªå·±å®ç°



å˜é‡ ================================================================================
String name = '';
var name = 'bob'; // ä¸èƒ½æ¥ç±»å‹å

bool? b1; // ä¸ç”¨åˆå§‹åŒ–ï¼Œæœ‰é»˜è®¤å€¼
final bool? b1; // æŠ¥é”™ï¼Œå¿…é¡»è¦æ‰‹åŠ¨åˆå§‹åŒ–

!> final å£°æ˜æ—¶å¯ä»¥ä¸ç»™å€¼ï¼Œåªè¦ä½¿ç”¨å‰ç»™å€¼å°±è¡Œ
final name = 'bob';
late final int a; // æ–‡æ¡£é‡Œè®²åˆ° late æ—¶è¯´å®ƒæ˜¯å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä½†å®é™…ä¸Šè¿™é‡Œæœ‰æ—  late æ•ˆæœç›¸åŒ

// åé¢å†ç»™å€¼
final String name;
if (b1) {
  name = 'John';
} else {
  name = 'Jane';
}

!> ç±»çš„å®ä¾‹å¸¸é‡å¿…é¡»å˜æˆé™æ€å¸¸é‡ï¼Œå³ï¼Œæ²¡æœ‰å®ä¾‹å¸¸é‡ï¼Œåªæœ‰å®ä¾‹ final
class Foo {
  const age = 10; // æŠ¥é”™
  static const age = 10; // æ·»åŠ  static
  final age = 10; // ç”¨ final
}

// è¿™ä¸‰ç§å†™æ³•å‰åéƒ½ä¸èƒ½æ”¹
const foo = [1, 2, 3]; // ç¼–è¯‘æ—¶èƒ½ç¡®å®šçš„å¸¸é‡ï¼Œç”¨è¿™ç§å†™æ³•
final foo = const ['one', 'two', 'three'];
final foo = List<String>.unmodifiable(['apple', 'orange', 'pear']);
// å‰ä¸å¯å˜ï¼Œåå¯å˜ï¼Œåé¢å¯æ·»åŠ æ–°å…ƒç´ 
final foo = ['one', 'two', 'three'];

!> final ä¸èƒ½èµ‹ç»™ constï¼Œconst å¯ä»¥èµ‹ç»™ const
final foo1 = [1, 2, 3];
const bar1 = foo1; // æŠ¥é”™
const foo2 = [1, 2, 3];
const bar2 = foo2; // æˆåŠŸ



ç±»å‹ ================================================================================
!> æ‰€æœ‰ç±»çš„åŸºç±»æ˜¯ Objectï¼ŒNull é™¤å¤–
!> æšä¸¾çš„åŸºç±» Enumï¼ŒEnum æ˜¯ Object çš„å­ç±»å—ï¼Ÿ
ç­”ï¼šæ–‡æ¡£é‡Œ Enum æ˜¯æŠ½è±¡æ¥å£ï¼Œä¸” ReqMethod.post is Object æ˜¯çœŸ

æ‰€æœ‰ç±»å‹å…¨æ˜¯ classï¼ŒåŒ…æ‹¬åŸºç¡€ç±»å‹ int/double
!> int å’Œ double èƒ½æ¯”è¾ƒå¤§å°
!> æ²¡æœ‰ unsigned è¿™ç±»æ•°å­—ï¼Œå…¨æ˜¯ signed

bool
num, int, double
String
Null
List, Map, Set

Records / Functions / Runes / Symbols

!> 5/2 å€¼æ˜¯ doubleï¼›5~/2 å€¼æ˜¯ int 
var x = 5/2;  // 2.5ï¼Œå€¼æ˜¯ doubleï¼Œä¸”ä¸èƒ½èµ‹ç»™ int å˜é‡ï¼Œ4/2 ä¹Ÿä¸è¡Œ
int x = 5~/2; // 2  ï¼Œå€¼æ˜¯ int

int.parse('1');
double.parse('1.1');
1.toString();
3.14159.toStringAsFixed(2);


!> Record ç”¨æ³•
Record ç±»å‹æ„Ÿè§‰å°±æ˜¯å…ƒç»„ï¼Œè™½ç„¶æ–‡æ¡£è¯´æ—  Tupleã€‚å¯ä»¥åƒå‡½æ•°ä¸€æ ·æœ‰å‘½åå‚æ•°ï¼Œä¸”åå­—æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†
(int, int) swap((int, int) aa) {
  var (a, b) = aa;
  return (b, a);
} // è¿™é‡Œç”¨çš„æ˜¯ä½ç½®å‚æ•°ã€‚
({int a, bool b}) record = (a: 123, b: true); è¿™æ˜¯å‘½åå‚æ•°

è®¿é—®èµ·ç‚¹æ˜¯ $1ï¼Œè·³è¿‡å‘½åéƒ¨åˆ†ï¼Œå†åˆ° $2
var bt = (label: "button",
          icon: "img",
          onPressed: () => print(""),
          )
å®šä¹‰ Record åˆ«å
typedef ButtonItem = ({String label, Icon icon, void Function()? onPressed});


!> å®šä¹‰å­—ç¬¦ä¸²
String å•åŒå¼•å·éƒ½è¡Œï¼Œæ²¡æœ‰ Character ç±»å‹
final unicode = '\u{1F60E}'; // ğŸ˜
å¦‚æœæ˜¯ 4 ä½ï¼Œèƒ½ç”¨è¿™å†™æ³• '\u2665'ï¼Œä¸‰ä½äº”ä½å¥½åƒå°±ä¸è¡Œäº†
è¿™ä¸‰è¡Œä¼šåˆå¹¶æˆä¸€è¡Œï¼Œè¿˜èƒ½ç”¨ + æ‹¼æ¥å­—ç¬¦ä¸²
  final s1 =
    'String '
    'concatenation'
    " even works over line breaks.";

å¦‚æœ You æ¢è¡Œåˆ°ç¬¬äºŒè¡Œè¡Œé¦–ï¼Œæ•ˆæœä¸€æ ·ï¼Œä¼šå¿½ç•¥è¿™ä¸ªæ¢è¡Œç¬¦ã€‚ä½†å¦‚æœ You åœ¨ç¬¬äºŒè¡Œæ—¶ï¼Œå‰æœ‰ç©ºæ ¼åˆ™ä¼šä¿ç•™ç©ºæ ¼
multiline å‰çš„å››ä¸ªç©ºæ ¼ä¼šä¿ç•™ï¼Œå¹¶ä¸ä¼šæŒ‰ç…§æœ€åä¸€è¡Œçš„ä½ç½®æ¥æˆªæ–­
  final s2 = '''You can create
    multiline strings like this one.
    ''';
å› ä¸ºä¸ä¼šæˆªæ–­ï¼Œæ‰€ä»¥å¦‚ä¸‹ã€‚æˆ‘æ„Ÿè§‰ç»“å°¾çš„å¼•å·ä¸è¦æ–°èµ·è¡Œäº†ã€‚
  '''a'''; é•¿åº¦æ˜¯ 1
  '''a
'''; é•¿åº¦æ˜¯ 2
'''a
  '''; é•¿åº¦æ˜¯ 4ã€‚æ‰“å°åœ¨æ§åˆ¶å°æ—¶ï¼Œçœ‹ä¸è§ç¬¬äºŒè¡Œï¼Œä½†é•¿åº¦è¯æ˜æ¢è¡Œå’Œç©ºæ ¼ç¡®å®åœ¨

å­—ç¬¦ä¸²å‰é¢åŠ  r å°±æˆåŸå§‹å­—ç¬¦ä¸²ï¼Œå†…éƒ¨çš„è½¬ä¹‰å°±ä¸èµ·ä½œç”¨äº†


!> ç©ºå®‰å…¨
?. å’Œ ?? ä½œç”¨å’Œ swift ç›¸åŒ
a ??= bï¼Œa ä¸ºç©ºæ—¶æ‰æŠŠ b èµ‹ç»™ aï¼Œç­‰äº a = a ?? bã€‚æ‰€ä»¥ï¼Œ??= å¯èƒ½ä¼šèµ‹å€¼ï¼Œ?? ä¸€å®šä¼šèµ‹å€¼

a is int
a is! int
a as int // æœ‰å¯èƒ½ä¼šå´©ï¼Œå¦‚æœä¸ç¡®å®šï¼Œå°±å…ˆç”¨ is æµ‹è¯•ä¸€ä¸‹ï¼Œç›¸å½“äº swift çš„ as!ï¼Œæ²¡æœ‰ as? å¯¹åº”çš„å†™æ³•
æˆ‘è¯•äº†ï¼Œèƒ½è¢« try catch æ•è·ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸ªå¼‚å¸¸ï¼Œä»¥åç”¨çš„æ—¶å€™ï¼Œæœ€å¥½ç”¨ try catch

è§£åŒ…çš„æ—¶å€™ï¼Œswift è¦ if letï¼Œè¿™é‡Œ is åˆ¤æ–­æˆåŠŸåï¼Œé‡Œé¢å¯ä»¥ç›´æ¥ç”¨ï¼Œä½†èŠ±æ‹¬å·åé¢ä¸è¡Œ
  final u = get_user();
  if (u is User) {
    u.log();
  }

  String? a;
  a = 'ab'; // å¦‚æœèµ‹éç©ºå€¼ï¼Œåé¢è®¿é—® length ç¼–è¯‘é€šè¿‡
  a = null; // å¦‚æœèµ‹  ç©ºå€¼ï¼Œåé¢è®¿é—® length ç¼–è¯‘å¤±è´¥ï¼Œè²Œä¼¼ a çš„ç±»å‹æ ¹æ®å®ƒè¢«èµ‹çš„å€¼åœ¨å˜ï¼Ÿ
  print(a.length);

  int? a = 5 / null;
  int b = a; // è¿™é‡Œèƒ½å¦ç¼–è¯‘æˆåŠŸï¼Œä¹Ÿè¦çœ‹ä¸Šé¢èµ‹çš„å€¼æ˜¯ä¸æ˜¯ç©ºï¼Œæ‰€ä»¥ a çš„ç±»å‹çœŸçš„åœ¨å˜ï¼Ÿ

ä¼¼ä¹ a çš„ç±»å‹ä¸æ˜¯å¯é€‰ä¸€æ ·ï¼Œç»™å®ƒèµ‹ä¸ªå€¼ï¼Œè¿é—®å·éƒ½ä¸è¦äº†ï¼Œä¸ºä½•ï¼Ÿ
å®šä¹‰çš„æ—¶å€™åŠ ä¸åŠ é—®å·éƒ½è¡Œï¼Œä½¿ç”¨çš„æ—¶å€™åŠ ä¸åŠ é—®å·ä¹Ÿè¡Œï¼Œä¼¼ä¹æ²¡å•¥å…³ç³»
  double? a = 5.123;
  print(a.toInt()); // a.toInt() åœ¨ vscode çœ‹åˆ°çš„ç±»å‹æ˜¯ int
  print(a?.toInt()); // a?.toInt() åœ¨ vscode çœ‹åˆ°çš„ç±»å‹æ˜¯ int?


!> å…¨å±€å˜é‡/é™æ€å˜é‡ éƒ½æ˜¯æ‡’åŠ è½½çš„
late çš„ä¸»æ—¨æ˜¯ï¼šä¸€ä¸ªéç©ºçš„å˜é‡ï¼Œæˆ‘ä¼šåœ¨å°†æ¥ä½¿ç”¨å®ƒä¹‹å‰ç»™å®ƒèµ‹å€¼ã€‚late æœ‰ä¸¤ä¸ªä½œç”¨
1) æ‡’åŠ è½½ï¼Œlate å˜é‡åå¦‚æœç»™åˆå§‹å€¼ï¼Œè¿™å°±æ˜¯æ‡’åŠ è½½ã€‚å½“æ­¤å±æ€§èµ‹å€¼éœ€è¦ç”¨åˆ° this æ—¶ï¼Œæ‡’åŠ è½½å°±å¾ˆæœ‰ç”¨
2) éšå¼è§£åŒ…!ï¼Œè®¿é—®æ—¶å¦‚æœæœªåˆå§‹åŒ–ä¼šå´©ï¼ˆå¯é€‰ä¹Ÿå¿…é¡»åˆå§‹åŒ–ï¼‰ï¼Œå°±ç®—è®¿é—®æ—¶åŠ ä¸Šé—®å·ä¹Ÿä¼šå´©ã€‚è¿™å°±è¦è‡ªå·±æ³¨æ„å®‰å…¨äº†
class Weather {
  late int _temperature = _readThermometer(); // è®¿é—®æ­¤å±æ€§çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–ï¼Œæ‰ä¼šè°ƒç”¨æ–¹æ³•
  int? bbb; // æœ‰é»˜è®¤å€¼ï¼Œä¸ç”¨åˆå§‹åŒ–ï¼Œèƒ½ç›´æ¥è®¿é—®
  late int? aaa; // å¿…é¡»åˆå§‹åŒ–ä»¥åæ‰èƒ½è®¿é—®ï¼Œå¦åˆ™ä¼šå´©
}
å¯ç©ºå˜é‡æœ‰é»˜è®¤å€¼ nullã€‚å¯ç©ºçš„ç±»å®ä¾‹æˆå‘˜å˜é‡ä¹Ÿæœ‰é»˜è®¤å€¼

late int theval = foo(); å¦‚æœç¬¬ä¸€æ¬¡è®¿é—®å®ƒæ˜¯ç›´æ¥ç»™å®ƒè®¾ç½®å€¼ï¼Œfoo() ä¸ä¼šè¢«è°ƒç”¨


!> ä¸èƒ½å®šä¹‰æ–°è¿ç®—ç¬¦(swift å¯ä»¥)ï¼Œä½†èƒ½é‡è½½
class Vector {
  final double x, y , z;
  Vector operator +(Vector v) {
    return Vector(x: x + v.x, y: y + v.y, z: z+v.z);
  }
}



é›†åˆ ================================================================================
åˆ—è¡¨
final List<String> list1 = <String>['one', 'two', 'three'];
final list2 = <String>['one', 'two', 'three'];
final list3 = ['one', 'two', 'three'];

[5, 2.0] ç±»å‹æ˜¯ List<num>

const Object i = 3;
const list = [i as int]; // [3]

ç©ºæ„ŸçŸ¥
[1, ?absentValue, ?presentValue, absentValue, 5]
ç±»å‹æ˜¯ List<int?>ï¼Œå¦‚æœä¸è¦æœ€åçš„ absentValueï¼Œç±»å‹æ˜¯ List<int>
å‰é¢åŠ é—®å·æ—¶ï¼Œå¦‚æœè¿™å˜é‡ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæœ‰å€¼åŠ åˆ°æ•°ç»„é‡Œ

å±•å¼€
final list1 = [1, 2, 3];
final list2 = [0, ...list1];
final list3 = [0, ...?list]; // å¯é€‰çš„æ—¶å€™ç”¨è¿™ç§

if ç”¨æ³•
var items = [
  0,
  if (name == 'kiwi') 10 else if (name == 'pear') 20 else 30, // å¯ä»¥æ²¡æœ‰ else if å’Œ else
  2,
];

Object data = 123;
var typeInfo = [
  if (data case int i) 'Data is an integer: $i',
  if (data case String s) 'Data is a string: $s',
  if (data case bool b) 'Data is a boolean: $b',
  if (data case double d) 'Data is a double: $d',
];

var word = 'hello';
var items = [
  1,
  if (word case String(length: var wordLength)) wordLength, // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå–å­—ç¬¦ä¸²çš„é•¿åº¦
  3,
];

var orderDetails = ['Apples', 12, 'bb'];
var summary = [
  'Product: ${orderDetails[0]}',
  if (orderDetails case [_, int qty, _]) 'Quantity: $qty',
  if (orderDetails case [_, _, '']) 'Delivery: Not Started' else 'Delivery: In Progress',
];

for ç”¨æ³•ï¼Œfor å’Œ if è¿˜èƒ½äº¤å‰é›†åˆèµ·æ¥ç”¨
[1, for (var n in numbers) n * n, 7];
[1, for (var x = 5; x > 2; x--) x, 7];



å­—å…¸ï¼Œæ¯ä¸ª Object éƒ½æœ‰ hashï¼Œswift é‡Œéœ€è¦æ˜ç¡®å®ç° Hashable
final gifts = <String, Object>{};
final gifts = { 'first': 'partridge', 'second': 'turtle doves' };

ç©ºæ„ŸçŸ¥
  var itemsA = {presentKey: absentValue}; // {Apple: null} <String:int?>
  var itemsB = {presentKey: ?absentValue}; // {} <String:int> ä¸ºä»€ä¹ˆåˆè®°ä¸ä½ç±»å‹ï¼Ÿint?å‘¢ï¼Ÿåº”è¯¥æ˜¯ ?absentValue çš„ä½œç”¨
  var itemsC = {absentKey: presentValue}; // {null: 3} <String?:int>
  var itemsD = {?absentKey: presentValue}; // {} <String:int>
  var itemsE = {absentKey: absentValue}; // {null: null} <String?:int?>
  var itemsF = {?absentKey: ?absentValue}; // {} <String:int>

if ç”¨æ³•
const map = {if (i is int) i: 'int'};



é›†åˆï¼Œå­˜ hashCode ä¸åŒçš„å€¼ï¼Œé»˜è®¤çš„å®ç°åŸºäº object's identityã€‚å¦‚æœä¸¤ä¸ªä¸åŒå®ä¾‹é€šè¿‡ == èƒ½åˆ¤æ–­ç›¸ç­‰ï¼Œéœ€è¦é‡å†™ hashCode
final abc = {'a', 'b', 'c'};
final abc = Set<String>.unmodifiable(['a', 'b', 'c']);

ç©ºé›†åˆçš„å£°æ˜æ–¹å¼æœ‰ä¸¤ç§
final names = <String>{};
Set<String> alsoNames = {};
final names = {}; // è¿™ä¼šè¢«å½“æˆç©ºå­—å…¸ï¼Œç±»å‹æ˜¯ Map<dynamic, dynamic>

if ç”¨æ³•
const set = {if (list is List<int>) ...list};
