
xcrun simctl list
open -a Simulator --args -CurrentDeviceUDID B064EFFA-5833-423F-8DB0-E1083EA4B76C

ç¼–è¯‘ï¼Œæ£€æµ‹è¯­æ³•æ˜¯å¦æ­£ç¡®
dart compile exe min.dart

èƒ½æŠŠå…¶å®ƒç›®å½•åˆ äº†ï¼Œéœ€è¦çš„æ—¶å€™å†å»º
flutter create --platforms=android

================================================================================

æ—  public / privateï¼Œä¸‹åˆ’çº¿å¼€å¤´çš„ä¸º library ç§æœ‰ï¼Œå¥½åƒå¹¶éé ç¨‹åºå‘˜è‡ªè§‰ï¼Œè€Œæ˜¯ç¼–è¯‘å™¨ä¿è¯å®ƒä¸å¯è¢«å¤–éƒ¨è®¿é—®

final val = a ? 1 :
            b ? 2 : 3;

list
  .where((c) => c >= 3)
  .map((c) => c + 10)
  .forEach((c) => print(c));
map((item) { return item.toUpperCase(); })

obj.runtimeType ç±»å‹æ˜¯ Typeã€‚ç”¨ obj is Typeï¼Œå°½é‡ä¸è¦ç”¨ obj.runtimeType == Type

class WannabeFunction {
  String call(String a, String b, String c) => '$a $b $c!'; // swift çš„ callAsFunction
}

ç©ºé›†åˆä¸Šé¢è°ƒç”¨ first/last ä¼šå´©



å˜é‡ ================================================================================
String name = '';
var name = 'bob'; // ä¸èƒ½æ¥ç±»å‹å

// final å£°æ˜æ—¶å¯ä»¥ä¸ç»™å€¼ï¼Œåªè¦ä½¿ç”¨å‰ç»™å€¼å°±è¡Œ
final name = 'bob';
late final int a; // æ–‡æ¡£é‡Œè®²åˆ° late æ—¶è¯´å®ƒæ˜¯å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä½†å®é™…ä¸Šè¿™é‡Œæœ‰æ—  late æ•ˆæœç›¸åŒ

// åé¢å†ç»™å€¼
final String name;
if (b1) {
  name = 'John';
} else {
  name = 'Jane';
}

// è¿™ä¸‰ç§å†™æ³•å‰åéƒ½ä¸èƒ½æ”¹
const foo = [1, 2, 3]; // ç¼–è¯‘æ—¶èƒ½ç¡®å®šçš„å¸¸é‡ï¼Œç”¨è¿™ç§å†™æ³•
final foo = const ['one', 'two', 'three'];
final foo = List<String>.unmodifiable(['apple', 'orange', 'pear']);
// å‰ä¸å¯å˜ï¼Œåå¯å˜
final foo = ['one', 'two', 'three'];

ç±»æˆå‘˜ï¼Œå¦‚æœå†™ constï¼Œå®ƒå¿…é¡»å¼„æˆé™æ€çš„ã€‚æ‰€ä»¥æˆ‘æ„Ÿè§‰å®ä¾‹å¸¸é‡åªèƒ½ç”¨ final

final foo1 = [1, 2, 3];
const bar1 = foo1; // final ä¸èƒ½èµ‹ç»™ const
const foo2 = [1, 2, 3];
const bar2 = foo2; // const å¯ä»¥èµ‹ç»™ const


typedef IntList = List<int>;

typedef ListMapper<X> = Map<X, List<X>>;
Map<String, List<String>> m1 = {}; // Verbose.
ListMapper<String> m2 = {};

typedef Compare<T> = int Function(T a, T b);
int sort(int a, int b) => a - b;
assert(sort is Compare<int>);



ç±»å‹ ================================================================================
æ‰€æœ‰ç±»çš„åŸºç±»æ˜¯ Objectï¼ŒNull é™¤å¤–
æšä¸¾çš„åŸºç±» Enumï¼ŒEnum æ˜¯ Object çš„å­ç±»å—ï¼Ÿ

æ‰€æœ‰ç±»å‹å…¨æ˜¯ classï¼ŒåŒ…æ‹¬åŸºç¡€ç±»å‹ int/double
int å’Œ double èƒ½æ¯”è¾ƒ

bool
num, int, double // æ²¡æœ‰ unsigned è¿™ç±»æ•°å­—ï¼Œå…¨æ˜¯ signed
String
Null
List, Map, Set

Records / Functions / Runes / Symbols

var x = 5/2;  // 2.5ï¼Œå€¼æ˜¯ doubleï¼Œä¸èƒ½èµ‹ç»™ intï¼Œ4/2 ä¹Ÿä¸è¡Œ
int x = 5~/2; // 2ï¼Œå€¼æ˜¯ int


Record ç±»å‹æ„Ÿè§‰å°±æ˜¯å…ƒç»„ï¼Œè™½ç„¶æ–‡æ¡£è¯´æ—  Tupleã€‚å¯ä»¥åƒå‡½æ•°ä¸€æ ·æœ‰å‘½åå‚æ•°ï¼Œä¸”åå­—æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†
(int, int) swap((int, int) aa) {
  var (a, b) = aa;
  return (b, a);
} // è¿™é‡Œç”¨çš„æ˜¯ä½ç½®å‚æ•°ã€‚
({int a, bool b}) record = (a: 123, b: true); è¿™æ˜¯å‘½åå‚æ•°

è®¿é—®èµ·ç‚¹æ˜¯ $1ï¼Œè·³è¿‡å‘½åéƒ¨åˆ†ï¼Œå†åˆ° $2
var bt = (label: "button",
          icon: "img",
          onPressed: () => print(""),
          )
å®šä¹‰ Record åˆ«å
typedef ButtonItem = ({String label, Icon icon, void Function()? onPressed});


String å•åŒå¼•å·éƒ½è¡Œï¼Œæ²¡æœ‰ Character ç±»å‹
final unicode = '\u{1F60E}'; // ğŸ˜
å¦‚æœæ˜¯ 4 ä½ï¼Œèƒ½ç”¨è¿™å†™æ³• '\u2665'ï¼Œä¸‰ä½äº”ä½å¥½åƒå°±ä¸è¡Œäº†
è¿™ä¸‰è¡Œä¼šåˆå¹¶æˆä¸€è¡Œï¼Œè¿˜èƒ½ç”¨ + æ‹¼æ¥å­—ç¬¦ä¸²
  final s1 =
    'String '
    'concatenation'
    " even works over line breaks.";

ä¸‹é¢ s2 æ˜¯ä¸¤è¡Œï¼ŒåŒå¼•å·æ•ˆæœç›¸åŒ
å¦‚æœ You æ¢è¡Œåˆ°ä¸‹ä¸€è¡Œè¡Œé¦–ï¼Œæ•ˆæœä¸€æ ·ï¼Œä¼šå¿½ç•¥è¿™ä¸ªæ¢è¡Œç¬¦
ç¬¬äºŒè¡Œå‰çš„å››ä¸ªç©ºæ ¼ä¼šä¿ç•™ï¼Œå¹¶ä¸ä¼šæŒ‰ç…§æœ€åä¸€è¡Œçš„ä½ç½®æ¥æˆªæ–­
å­—ç¬¦ä¸²æœ€åçš„æ¢è¡Œç¬¦ä¼šä¿ç•™
  final s2 = '''You can create
    multiline strings like this one.
    ''';
å­—ç¬¦ä¸²å‰é¢åŠ  r å°±æˆåŸå§‹å­—ç¬¦ä¸²ï¼Œå†…éƒ¨çš„è½¬ä¹‰å°±ä¸èµ·ä½œç”¨äº†

int.parse('1');
double.parse('1.1');
1.toString();
3.14159.toStringAsFixed(2);

æ¨æ–­ä¸å‡ºç±»å‹æ—¶ï¼Œç±»å‹æ˜¯ dynamicã€‚ç¼–è¯‘å™¨ä¼šç»™è­¦å‘Šï¼Œå¦‚æœçœŸçš„è¦è¿™æ ·åšï¼Œç”¨ Object?
å„ç§æ–‡ç« éƒ½è¯´ï¼šç”¨ Object/Object?ï¼Œå°‘ç”¨ dynamic
ç½‘ä¸Šè¯´ï¼š
  dynamic æ˜¯ç±»å‹å£°æ˜ï¼Œç›¸å½“äº swift ä¸­çš„ Anyï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹çš„å£°æ˜ï¼Œå¦‚ String
  Object å¯ä»¥çˆ¶ç±»æŒ‡å‘å­ç±»å¯¹è±¡
  dynamic æ˜¯è¿è¡Œæ—¶æŠ¥é”™ï¼ŒObject æ˜¯ç¼–è¯‘æ—¶æŠ¥é”™

int assume(dynamic object) { // è¿è¡Œæ—¶ä¼ éå­—ç¬¦ä¸²ä¼šå´©
  String string = object;
  return string.length;
}



è¿ç®—ç¬¦ ================================================================================
ä¸èƒ½å®šä¹‰æ–°è¿ç®—ç¬¦(swift å¯ä»¥)ï¼Œä½†èƒ½é‡è½½
class Vector {
  final double x, y , z;
  Vector operator +(Vector v) {
    return Vector(x: x + v.x, y: y + v.y, z: z+v.z);
  }
}

a is int
a is! int
a as int // æœ‰å¯èƒ½ä¼šå´©ï¼Œå¦‚æœä¸ç¡®å®šï¼Œå°±å…ˆç”¨ is æµ‹è¯•ä¸€ä¸‹ï¼Œç›¸å½“äº swift çš„ as!ï¼Œæ²¡æœ‰ as? å¯¹åº”çš„å†™æ³•
æˆ‘è¯•äº†ï¼Œèƒ½è¢« try catch æ•è·ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸ªå¼‚å¸¸ï¼Œä»¥åé‡åˆ°è§£åŒ…çš„æ—¶å€™ï¼Œæœ€å¥½ç”¨ try catch

è§£åŒ…çš„æ—¶å€™ï¼Œswift è¦ if letï¼Œè¿™é‡Œ is åˆ¤æ–­æˆåŠŸåï¼Œé‡Œé¢å¯ä»¥ç›´æ¥ç”¨ï¼Œä½†èŠ±æ‹¬å·åé¢ä¸è¡Œ
  final u = get_user();
  if (u is User) {
    u.log();
  }

å…¨å±€å˜é‡/é™æ€å˜é‡ éƒ½æ˜¯æ‡’åŠ è½½çš„
late å˜é‡åå¦‚æœç»™åˆå§‹å€¼ï¼Œè¿™å°±æ˜¯æ‡’åŠ è½½ã€‚å½“æ­¤å±æ€§èµ‹å€¼éœ€è¦ç”¨åˆ° this æ—¶ï¼Œæ‡’åŠ è½½å°±å¾ˆæœ‰ç”¨
ç¬¬äºŒä¸ªä½œç”¨ç±»ä¼¼äºéšå¼è§£åŒ…!ï¼Œè®¿é—®æ—¶å¦‚æœæœªåˆå§‹åŒ–ä¼šå´©ï¼ˆå¯é€‰ä¹Ÿå¿…é¡»åˆå§‹åŒ–ï¼‰ï¼Œå°±ç®—è®¿é—®æ—¶åŠ ä¸Šé—®å·ä¹Ÿä¼šå´©ã€‚è¿™å°±è¦è‡ªå·±æ³¨æ„å®‰å…¨äº†
class Weather {
  late int _temperature = _readThermometer(); // è®¿é—®æ­¤å±æ€§çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–
}
å¯ç©ºçš„ç±»å®ä¾‹æˆå‘˜å˜é‡ä¹Ÿæœ‰é»˜è®¤å€¼

?. å’Œ ?? ä½œç”¨å’Œ swift ç›¸åŒ

a ??= bï¼Œa ä¸ºç©ºæ—¶æ‰æŠŠ b èµ‹ç»™ aï¼Œç­‰äº a = a ?? bã€‚å¯èƒ½ä¼šèµ‹å€¼ï¼Œ?? ä¸€å®šä¼šèµ‹å€¼

å¯ç©ºå˜é‡æœ‰é»˜è®¤å€¼ nullã€‚å¯ç©ºçš„ç±»å®ä¾‹æˆå‘˜å˜é‡ä¹Ÿæœ‰é»˜è®¤å€¼

int? a = 5;
int b = a; // Not allowed. ä½†å®é™…ä¸Šï¼Œè¿™é‡Œç¼–è¯‘é€šè¿‡äº†ï¼Œä¸ºä½•ï¼Ÿ
int b = a!; // Allowed.
è§£é‡Š
int? a = get_num(); // 1)å‡½æ•°å†…éƒ¨éšæœºï¼Œå¶å°”èƒ½å¾—åˆ°é null çš„å€¼
// a = 20; // 3)ä½†æ˜¯ï¼Œå¦‚æœæŠŠè¿™é‡Œæ‰“å¼€ï¼Œa çš„ç±»å‹è¿˜æ˜¯ int å—?ï¼Œä¸‹é¢å°±èƒ½ç¼–è¯‘é€šè¿‡äº†ã€‚ä¼°è®¡ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯å®‰å…¨çš„
int b = a; // 2)è¿™é‡Œä¹Ÿçš„ç¡®ç¼–è¯‘ä¸è¿‡ï¼Œa çš„ç±»å‹æ˜¯ int?

ä¼¼ä¹ a çš„ç±»å‹ä¸æ˜¯å¯é€‰ä¸€æ ·ï¼Œç»™å®ƒèµ‹ä¸ªå€¼ï¼Œè¿é—®å·éƒ½ä¸è¦äº†ï¼Œä¸ºä½•ï¼Ÿ
å®šä¹‰çš„æ—¶å€™åŠ ä¸åŠ é—®å·éƒ½è¡Œï¼Œä½¿ç”¨çš„æ—¶å€™åŠ ä¸åŠ é—®å·ä¹Ÿè¡Œï¼Œä¼¼ä¹æ²¡å•¥å…³ç³»
double? a = 5.123;
print(a.toInt());
print(a?.toInt());



é›†åˆ ================================================================================
åˆ—è¡¨
final List<String> list1 = <String>['one', 'two', 'three'];
final list2 = <String>['one', 'two', 'three'];
final list3 = ['one', 'two', 'three'];
fruits.add('peach');
fruits.addAll(['kiwi', 'mango']);

[5, 2.0] ç±»å‹æ˜¯ List<num>

const Object i = 3;
const list = [i as int]; // [3]

ç©ºæ„ŸçŸ¥
[1, ?absentValue, ?presentValue, absentValue, 5]
ç±»å‹æ˜¯ List<int?>ï¼Œå¦‚æœä¸è¦æœ€åçš„ absentValueï¼Œç±»å‹æ˜¯ List<int>
å‰é¢åŠ é—®å·æ—¶ï¼Œå¦‚æœè¿™å˜é‡ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæœ‰å€¼åŠ åˆ°æ•°ç»„é‡Œ

å±•å¼€
final list1 = [1, 2, 3];
final list2 = [0, ...list1];
final list3 = [0, ...?list]; // å¯é€‰çš„æ—¶å€™ç”¨è¿™ç§

if ç”¨æ³•
var items = [
  0,
  if (name == 'kiwi') 10 else if (name == 'pear') 20 else 30, // å¯ä»¥æ²¡æœ‰ else if å’Œ else
  2,
];

Object data = 123;
var typeInfo = [
  if (data case int i) 'Data is an integer: $i',
  if (data case String s) 'Data is a string: $s',
  if (data case bool b) 'Data is a boolean: $b',
  if (data case double d) 'Data is a double: $d',
];

var word = 'hello';
var items = [
  1,
  if (word case String(length: var wordLength)) wordLength,
  3,
];

var orderDetails = ['Apples', 12, 'bb'];
var summary = [
  'Product: ${orderDetails[0]}',
  if (orderDetails case [_, int qty, _]) 'Quantity: $qty',
  if (orderDetails case [_, _, '']) 'Delivery: Not Started' else 'Delivery: In Progress',
];

for ç”¨æ³•ï¼Œfor å’Œ if è¿˜èƒ½äº¤å‰é›†åˆèµ·æ¥ç”¨
[1, for (var n in numbers) n * n, 7];
[1, for (var x = 5; x > 2; x--) x, 7];



å­—å…¸ï¼Œæ¯ä¸ª Object éƒ½æœ‰ hashï¼Œswift é‡Œéœ€è¦æ˜ç¡®å®ç° Hashable
final gifts = <String, Object>{};
final gifts = {
  'first': 'partridge',
  'second': 'turtle doves',
  'fifth': 'golden rings',
};
gifts['first']; // è·å–å€¼
gifts.containsKey('fifth');
gifts['second'] = 'turtle'; // æ–°åŠ /æ›´æ–°ã€‚ä¼šè¿”å›æœ€æ–°çš„å€¼
gifts.remove('first');      // ä¼šè¿”å›è¢«ç§»é™¤çš„å€¼
gifts.removeWhere((key, value) => value == 'partridge');

ç©ºæ„ŸçŸ¥
  var itemsA = {presentKey: absentValue}; // {Apple: null} <String:int?>
  var itemsB = {presentKey: ?absentValue}; // {} <String:int> ä¸ºä»€ä¹ˆåˆè®°ä¸ä½ç±»å‹ï¼Ÿint?å‘¢ï¼Ÿåº”è¯¥æ˜¯ ?absentValue çš„ä½œç”¨
  var itemsC = {absentKey: presentValue}; // {null: 3} <String?:int>
  var itemsD = {?absentKey: presentValue}; // {} <String:int>
  var itemsE = {absentKey: absentValue}; // {null: null} <String?:int?>
  var itemsF = {?absentKey: ?absentValue}; // {} <String:int>

if ç”¨æ³•
const map = {if (i is int) i: 'int'};



é›†åˆï¼Œå­˜ hashCode ä¸åŒçš„å€¼ï¼Œé»˜è®¤çš„å®ç°åŸºäº object's identityã€‚å¦‚æœä¸¤ä¸ªä¸åŒå®ä¾‹é€šè¿‡ == èƒ½åˆ¤æ–­ç›¸ç­‰ï¼Œéœ€è¦é‡å†™ hashCode
final abc = {'a', 'b', 'c'};
final abc = Set<String>.unmodifiable(['a', 'b', 'c']);
abc.add('');

ç©ºé›†åˆç”¨è¿™ä¸¤æ–¹å¼
final names = <String>{};
Set<String> alsoNames = {};
// final names = {}; // è¿™ä¼šè¢«å½“æˆç©ºå­—å…¸ï¼Œç±»å‹æ˜¯ Map<dynamic, dynamic>

if ç”¨æ³•
const set = {if (list is List<int>) ...list};
